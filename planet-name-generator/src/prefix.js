/**
 * @author Jamal Kamareddine
 * 
 * All possible planet name prefixes
 */
class Prefix {
    #prefixes = [
        [
            'A',
            'Ab',
            'Abd',
            'Abj',
            'Abr',
            'Abs',
            'Abth',
            'Aby',
            'Abz',
            'Ac',
            'Acl',
            'Acr',
            'Ad',
            'Adl',
            'Adm',
            'Adn',
            'Adr',
            'Adv',
            'Aeg',
            'Aegl',
            'Aegr',
            'Aet',
            'Aeth',
            'Aev',
            'Ag',
            'Agb',
            'Agd',
            'Agk',
            'Agl',
            'Agm',
            'Agn',
            'Agr',
            'Ags',
            'Agt',
            'Agth',
            'Agv',
            'Ah',
            'Ahs',
            'Aj',
            'Ak',
            'Akl',
            'Akr',
            'Akv',
            'Al',
            'Alb',
            'Alc',
            'Alcy',
            'Ald',
            'Aldh',
            'Alg',
            'Algr',
            'Alk',
            'Aln',
            'Alp',
            'Alph',
            'Alt',
            'Alz',
            'Am',
            'Ambr',
            'Amph',
            'Amr',
            'An',
            'Anb',
            'Anc',
            'And',
            'Andr',
            'Ang',
            'Angl',
            'Anj',
            'Ank',
            'Ankl',
            'Ankt',
            'Ans',
            'Ansh',
            'Anst',
            'Ant',
            'Anth',
            'Anthr',
            'Antl',
            'Ap',
            'Aph',
            'Aphr',
            'Aqu',
            'Ar',
            'Arc',
            'Arct',
            'Ard',
            'Ardv',
            'Arg',
            'Argz',
            'Ark',
            'Arkh',
            'Arm',
            'Arn',
            'Arp',
            'Arpl',
            'Art',
            'Arth',
            'Arv',
            'Arx',
            'Arz',
            'As',
            'Ascl',
            'Asdr',
            'Asg',
            'Ash',
            'Askl',
            'Asm',
            'Asp',
            'Ast',
            'Astr',
            'At',
            'Ath',
            'Athr',
            'Atl',
            'Atm',
            'Atr',
            'Atv',
            'Aud',
            'Audr',
            'Aur',
            'Auv',
            'Av',
            'Avr',
            'Ax',
            'Axb',
            'Axd',
            'Axt',
            'Ay',
            'Ayt',
            'Az',
            'Azdr',
            'Azm',
            'Azr',
            'Azt',
        ],
        [
            'B',
            'Bl',
            'Br',
        ],
        [
            'C',
            'Ch',
            'Chl',
            'Chr',
            'Cl',
            'Cr',
        ],
        [
            'D',
            'Dr',
        ],
        [
            'E',
            'Eb',
            'Ebl',
            'Ech',
            'Eck',
            'Ecl',
            'Ect',
            'Ecz',
            'Ed',
            'Eg',
            'Eh',
            'Ehw',
            'Eir',
            'Ej',
            'Ek',
            'Ekt',
            'Ektr',
            'Ekn',
            'Ekr',
            'Eks',
            'Ekt',
            'El',
            'Eld',
            'Eldr',
            'Elg',
            'Elgr',
            'Elk',
            'Eln',
            'Elp',
            'Elph',
            'Elr',
            'Elt',
            'Elv',
            'Elys',
            'Em',
            'Emb',
            'Emp',
            'Emr',
            'En',
            'Enc',
            'End',
            'Enp',
            'Enr',
            'Ens',
            'Ent',
            'Enth',
            'Entr',
            'Env',
            'Enz',
            'Eogr',
            'Eop',
            'Eos',
            'Eov',
            'Ep',
            'Eph',
            'Epr',
            'Eps',
            'Equ',
            'Er',
            'Erg',
            'Erph',
            'Ers',
            'Erw',
            'Eryt',
            'Eryth',
            'Erz',
            'Es',
            'Esb',
            'Esh',
            'Esk',
            'Esl',
            'Et',
            'Eth',
            'Etl',
            'Etr',
            'Etym',
            'Euc',
            'Euch',
            'Eucl',
            'Eug',
            'Eun',
            'Euph',
            'Euphr',
            'Eur',
            'Euryb',
            'Eurym',
            'Euryn',
            'Euryt',
            'Ev',
            'Ex',
            'Ey',
            'Ez',
            'Ezb',
            'Ezd',
            'Ezr',
        ],
        [
            'F',
            'Fl',
            'Fr',
        ],
        [
            'G',
            'Gh',
            'Gl',
            'Gr',
        ],
        [
            'H',
        ],
        [
            'I',
            'Ib',
            'Ibr',
            'Ic',
            'Ich',
            'Ig',
            'Ign',
            'Igr',
            'Ih',
            'Ik',
            'Ikr',
            'Il',
            'Ill',
            'Iln',
            'Im',
            'Imp',
            'In',
            'Ind',
            'Inf',
            'Ing',
            'Ingw',
            'Inj',
            'Ins',
            'Insh',
            'Int',
            'Inv',
            'Iob',
            'Ion',
            'Ioph',
            'Iot',
            'Ip',
            'Iph',
            'Ipl',
            'Ipr',
            'Ips',
            'Ir',
            'Is',
            'Ish',
            'It',
            'Ith',
            'Iv',
            'Iw',
            'Ix',
            'Iy',
            'Iz',
            'Izr',
        ],
        [
            'J',
            'Jh',
        ],
        [
            'K',
            'Kh',
            'Kl',
            'Kr',
        ],
        [
            'L',
        ],
        [ 
            'M',
        ],
        [
            'N',
        ],
        [
            'O',
            'Ob',
            'Obl',
            'Obr',
            'Obs',
            'Oc',
            'Ocl',
            'Ocr',
            'Oct',
            'Octh',
            'Od',
            'Og',
            'Ogd',
            'Ogl',
            'Ogm',
            'Ogn',
            'Ogr',
            'Oh',
            'Ohk',
            'Oj',
            'Ok',
            'Okl',
            'Okr',
            'Okw',
            'Ol',
            'Olg',
            'Olgr',
            'Ols',
            'Olt',
            'Olv',
            'Om',
            'Omn',
            'On',
            'Onc',
            'Ond',
            'Onj',
            'Oor',
            'Op',
            'Oph',
            'Opr',
            'Opt',
            'Or',
            'Orb',
            'Ord',
            'Org',
            'Orgl',
            'Ork',
            'Orl',
            'Orn',
            'Orph',
            'Orth',
            'Orv',
            'Os',
            'Ost',
            'Ostr',
            'Ot',
            'Oth',
            'Ov',
            'Ovn',
            'Our',
            'Ox',
            'Oy',
            'Oz',
        ],
        [
            'P',
            'Ph',
            'Phl',
            'Phr',
            'Pl',
            'Pr',
        ],
        [
            'Q',
            'Qu',
        ],
        [
            'R',
            'Rh',
        ],
        [
            'S',
            'Sc',
            'Scl',
            'Scr',
            'Sh',
            'Shr',
            'Sk',
            'Skl',
            'Skr',
            'Sl',
            'Sn',
            'Sp',
            'Sph',
            'Spl',
            'St',
            'Str',
            'Sv',
        ],
        [
            'T',
            'Th',
            'Thr',
            'Tr',
        ],
        [
            'U',
            'Ub',
            'Ubr',
            'Uc',
            'Uch',
            'Ud',
            'Ug',
            'Ugth',
            'Uh',
            'Uj',
            'Uk',
            'Ukd',
            'Ukl',
            'Ukr',
            'Ul',
            'Ulb',
            'Uld',
            'Ulf',
            'Ulfr',
            'Ulg',
            'Ulgr',
            'Ulk',
            'Ulkw',
            'Ulv',
            'Uly',
            'Um',
            'Umb',
            'Umbr',
            'Un',
            'Und',
            'Undr',
            'Uobr',
            'Up',
            'Ups',
            'Ur',
            'Urg',
            'Urgl',
            'Urkl',
            'Urn',
            'Urs',
            'Us',
            'Ush',
            'Usk',
            'Ut',
            'Uth',
            'Uv',
            'Uw',
            'Ux',
            'Uy',
            'Uz',
            'Uzb',
            'Uzv',
        ],
        [
            'V',
            'Vl',
            'Vr',
        ],
        [
            'W',
        ],
        [
            'X',
            'Xh',
        ],
        [ 
            'Y',
            'Yh',
        ],
        [
            'Z',
            'Zh',
        ],
        [   // More complex prefixes, separated to prevent bloat in each letter
            'Cth',
            'Crypt',
            'Cryx',
            'Cy',
            'Cyg',
            'Cygn',
            'Cyr',
            'Cyz',
            'Fyr',
            'Gy',
            'Gyth',
            'Hy',
            'Hyb',
            'Hybr',
            'Hyd',
            'Hydr',
            'Hyg',
            'Hyl',
            'Hym',
            'Hyp',
            'Hyr',
            'Hyst',
            'Krypt',
            'Ky',
            'Kyd',
            'Kyl',
            'Kyr',
            'Kys',
            'Kyt',
            'Kyz',
            'Ly',
            'Lyg',
            'Lyk',
            'Lyr',
            'Myc',
            'Myt',
            'Ny',
            'Nyct',
            'Nyr',
            'Nyss',
            'Nyx',
            'Phyb',
            'Phyl',
            'Phyt',
            'Plyg',
            'Plyth',
            'Pryt',
            'Ps',
            'Psy',
            'Py',
            'Pyg',
            'Pyl',
            'Pyr',
            'Pyth',
            'Pyx',
            'Ry',
            'Ryl',
            'Ryn',
            'Scy',
            'Syr',
            'Syph',
            'Thyb',
            'Thyl',
            'Thyr',
            'Ty',
            'Tyb',
            'Tych',
            'Tyg',
            'Tym',
            'Typh',
            'Typhl',
            'Tyr',
            'Tyt',
            'Tyth',
            'Tyx',
            'Vyf',
            'Vyk',
            'Wy',
            'Xy',
            'Xyl',
            'Xyk',
            'Xyn',
            'Xynth',
            'Xyr',
            'Xys',
            'Xyt',
            'Xyth',
            'Xyv',
            'Zy',
            'Zyg',
            'Zyk',
            'Zyl',
            'Zyn',
            'Zynf',
            'Zynt',
            'Zyr',
            'Zys',
            'Zyt',
            'Zyth',
            'Zyv',
        ],
    ];

    /**
     * Gets a random prefix from the above array
     * 
     * @return {string} The prefix
     */
    getPrefix() {
        const randNum = Math.floor(Math.random() * this.#prefixes.length);
        const letter = this.#prefixes[randNum];
        let prefix;
        
        // Make prefixes more often than not start with a single letter for consonants
        if (this.doesPrefixBeginWithVowel(letter[0]) || randNum === this.#prefixes.length - 1) {
            prefix = letter[Math.floor(Math.random() * letter.length)];
        }
        else {
            if (Math.random() < 0.75) {
                prefix = letter[0];
            }
            else {
                prefix = letter[Math.floor(Math.random() * letter.length)];
            }
        }

        return prefix;
    }

    /**
     * Gets a random prefix that starts with a specific letter
     * 
     * @param {string} letter The letter the prefix starts with
     * 
     * @return {string} The prefix
     */
    getPrefixWithFirstLetter(letter) {
        const lastArray = this.#prefixes[this.#prefixes.length - 1];
        const complexPrefixes = lastArray.filter(prefix => prefix.charAt(0) === letter);
        let letterPrefixArray = [];
        let prefix;

        for (let i = 0; i < this.#prefixes.length; i++) {
            if (this.#prefixes[i][0].charAt(0) === letter) {
                letterPrefixArray = [...this.#prefixes[i]];
                break;
            }
        }

        if (this.doesPrefixBeginWithVowel(letter[0])) {
            prefix = letterPrefixArray[Math.floor(Math.random() * letterPrefixArray.length)];
        }
        else if (complexPrefixes.length > 0 && Math.random() < 0.1) {
            prefix = complexPrefixes[Math.floor(Math.random() * complexPrefixes.length)];
        }
        else {
            if (Math.random() < 0.75) {
                prefix = letterPrefixArray[0];
            }
            else {
                prefix = letterPrefixArray[Math.floor(Math.random() * letterPrefixArray.length)];
            }
        }

        return prefix;
    }

    /**
     * Gets the amount of total prefixes
     * 
     * @return {number} The total number of possible prefixes
     */
    getNumPrefixes() {
        let numPrefixes = 0;

        for (let i = 0; i < this.#prefixes.length; i++) {
            numPrefixes += this.#prefixes[i].length;
        }

        return numPrefixes;
    }

    /**
     * Checks if the prefix begins with a vowel
     * 
     * @return {boolean} Whether or not the prefix begins with a vowel
     */
    doesPrefixBeginWithVowel(prefix) {
        return prefix === 'A' || prefix === 'E' || prefix === 'I' || prefix === 'O' || prefix === 'U';
    }
}